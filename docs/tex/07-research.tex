\chapter{Исследовательский раздел}

В исследовании будет проведено сравнение времени выполнения запроса с включенной и выключенной авторизацией от одного бизнес-сервиса сервиса к другому инфраструктурному.

\section{Описание проводимого исследования}
Для тестирования были развернуты бизнес-сервис и инфраструктурный в виде СУБД PostreSQL.
На листингах~\ref{lst:light_query.sql}--\ref{lst:heavy_query.sql} приведены примеры легкого и тяжелого запросов.

\includelisting
	{light_query.sql}{Пример легкого запроса}
	
\includelisting
	{heavy_query.sql}{Пример тяжелого запроса}

\section{Технические характеристики устройства}

Технические характеристики устройства, на котором проводилось исследование:
\begin{enumerate}
\item процессор Intel(R) Core(TM) i5-10210U CPU @ 1.60GHz 2.11 GHz,
\item оперативная память 8 ГБ,
\item операционная система Ubuntu 21.0.
\end{enumerate}

Исследование проводилось на ноутбуке. Во время исследования ноутбук не был нагружен посторонними приложениями, которые не относятся к исследованию, а также ноутбук был подключен к сети питания.

\section{Полученные результаты}
Исследование проводилось для приведенных как напрямую через пуллер соединений к базе данных без аутентификации, так и через прокси эндпоинт на сайдкаре с аутентификацией. Количество запросов варьировалось в 1000, 2500, 5000, 10000 для легких запросов, и в количестве 250, 500 и 1000 для тяжелых.
Отправка запросов велась параллельно в 5 потоках. Результаты для каждого количества запросов были усреднены по проведении 10 запусков исследования.

Полученные результаты в виде гистограмм представлены на рисунках~\ref{img:research_light}--\ref{img:research_heavy}. 

\includeimage
    {research_light}
    {f}
    {H}
    {0.9\textwidth}
    {Результаты исследования для легких запросов}
    
\includeimage
    {research_heavy}
    {f}
    {H}
    {0.9\textwidth}
    {Результаты исследования для тяжелых запросов}

\section*{Выводы по разделу}
Время выполнения запросов с включенной авторизацией оказались в среднем на 27\% дольше времени выполнения запросов с выключенной авторизацией. Это влияние заметно, но не критично.
% todo: обосновать спайк на первом замере.