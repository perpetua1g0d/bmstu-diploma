Todo:
[DONE] talos -> idp
context пробросить в запросы в idP

sign, verify enabled/auth -> signMode, verifyMode

1. Метрики
	[DONE] - в талосе token_result
	[DONE] - на клиенте auth_verified, auth_signed, token_issued
	[DONE] - убрать log.fatalf так как теперь есть метрики с кодом ответов
	[DONE] + один большой красивый дашборд
1.2 Тестовое исследование (текущее)

2. База талоса + права в свою базу
	- [CANCELED] или умолчать про базу? Мб просто хранить в файлике пока что если можно обновлять?
	+ [DONE] ручка UpdatePermissions(), GetPermissions()
	+ [DONE] ручка на сайдкаре refresh tokens()
3. Механизм управления доступами
	Админка: 
		- [DONE] добавить права
		- [DONE] запрос /refresh-tokens
		- [CANCELED] установить TTL
		- [CANCELED] U2I? - наверное не нужен, kubectl мб все же достаточно
		- [DONE] централизованное включение/выключение авторизации toggle (подумать про безопасность)
		- запускать исследование по кнопке (в другую постргю, кафку)
		- немного стилей + фикс галочек
4. [Мб в замечания отправить] Скоупы в токенах (не только сервис) + несколько скоупов в токене. token roles: {"scope": ["role1", ...]}
5. [DONE] authClient рефактор + либа + раунд трип.
	- context пробросить везде 
	+ [TODO] получение эндпоинтов из конфигурации, а то она сейчас не используется

6. Юзкейсы.
	- [BACKLOG] Kafka

7. Исследование (спросить как правильнее проводить)
	- [TODO] Сравнить с пуллером и без с /query эндпоинтом
	- [DONE] Лучше поднять параллельно 4 сервиса, по паре будут в друг друга ходить, не задевая другую пару
	- [DONE] RT в виде квантилий
	- [TODO] Лёгкие и тяжёлые запросы исследование
	- [зачем?] много запросов токена
	- 1 поток и 10 потоков
	- 4 графика: 2 пары через пуллер и /query с разным кол-вом потоков
8. Тестирование
	- [DONE] накинуть юнит тесты на idP
	- [TODO] клиента
	- Классы эквивалентности
*. Others
	- [CANCELED] Не захломлять докер образами на каждый деплой (либо в teardown очищать)
		+ подумать как запускать без интернета


Swagger? Документация? Документация - РПЗ
IdP:
	- [CANCELED] причем никто кроме админа не должен уметь эту ручку использовать.
	- [CANCELED] база
	- [CANCELED] RO, RW -> Read, Write
[HOLD ON] labeled errors?

Потсгрес:
	- [CANCELED] pg.hpa.conf - ограничить походы из других подов
	- [CANCELED] loopback: отключить на localhost авторизацию, а не через localhost забанить
	- [CANCELED] в постгресе самом парсить запрос (отделять от другого) и послать в другую инфру, сайдкар должн быть чисто как мидлварь
	
[DONE] Съехать на S2I, Реалм i2i -> s2i

Idp:
	- [TODO] тесты на signer (чекнуть покрытие)	

Админка:
	- [TODO] кнопка запуска исследования на сервисе, послать запрос, в котором сервис прекратит обычные запросы

Сайдкары:
	- [DONE] ограничить ресурс вне неймспейса, иначе /query эндпоинт не имеет смысла если можно напрямую к БД подключиться через пуллер

Метрики:
	- [DONE] добавить метрики инфры, например размер стороджа (или таблицы) postgresql

UI:
	- [DONE?] пофиксить Настройки для всех сервисов обновлены! (после рефреша страницы пропадает)

Дашборд:
	- [DONE] базовые метрики запросов -> базовые метрики запросов к сервису
	- перепутаны местами метрики подписи и Количество проверок токена входящих запросов
	- [DONE] Квантили гистограмм в переменную (что такое гистограмма?)
	- Подправить названия, внимательно проверить лейблы
		шт/c тоже подумать
	- время выполнения -> среднее время выполнения
	- поправить редкие времена выполнения на rate[10m]

[PARTLY] Бэкофф токена - есть, минимальный

[CANCELED] single flight паттерн? 


service-a -> postgres-a/query
